!function(a){var e={};function t(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return a[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=a,t.c=e,t.d=function(a,e,o){t.o(a,e)||Object.defineProperty(a,e,{enumerable:!0,get:o})},t.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},t.t=function(a,e){if(1&e&&(a=t(a)),8&e)return a;if(4&e&&"object"==typeof a&&a&&a.__esModule)return a;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:a}),2&e&&"string"!=typeof a)for(var n in a)t.d(o,n,function(e){return a[e]}.bind(null,n));return o},t.n=function(a){var e=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(e,"a",e),e},t.o=function(a,e){return Object.prototype.hasOwnProperty.call(a,e)},t.p="",t(t.s=138)}({138:function(a,e,t){"use strict";var o;t.r(e),(o=jQuery).fn.scrollSpot=function(a,e){if(o(this).length<1)return;let t=this;function n(){let n=t;e&&(n=t.find(e)),o(n).each(function(){!function(a){let e=o(a).offset().top,t=e+o(a).outerHeight(),n=o(window).scrollTop(),c=n+o(window).height();return t>n&&e<c}(this)?(o(this).removeClass("in-viewport"),o(this).data("in-viewport",!1)):(a&&a.call(this),o(this).addClass("in-viewport"),o(this).addClass("spotted"),o(this).data("spotted",!0),o(this).data("in-viewport",!0))})}return t.find(e).length||new MutationObserver(n).observe(t[0],{childList:!0,characterData:!0,attributes:!0,subtree:!0}),o(window).on("resize scroll",n),o(document).ready(n),this},window.DaReactions=DaReactions||{ajax_url:""},function(a){function e(){let e=a(this).closest(".da-reactions-data"),t=a(e).data("type"),o=a(e).data("id"),n=a(e).data("reaction"),c=a(e).data("nonce")||DaReactions.nonce,s=a(e).find("img"),r=e.closest(".da-reactions-reveal").find(".before-reveal"),l=r.find("img"),d=r.find(".count");l.attr("src",DaReactions.loader_url),i("clickedCount",t,o,n),i("mouseOverCount",t,o,n),a.ajax({url:DaReactions.ajax_url,method:"post",cache:!1,data:{action:"add_reaction",id:o,nonce:c,reaction:n,type:t},success:function(a){if("ok"===a.success){let t=!1,o=0;l.length&&l.attr("src",s.attr("src"));for(let n in a.reactions)if(a.reactions.hasOwnProperty(n)){let c=e.parent().find(".reaction.reaction_"+a.reactions[n].ID);a.reactions[n].current?(t=!0,c.addClass("active"),c.removeClass("inactive")):(c.removeClass("active"),c.addClass("inactive"));const i=a.reactions[n].total||0,s=c.find(".count");s.text(y(i)),"always"===DaReactions.show_count||"non-zero"===DaReactions.show_count&&i>0?s.show():s.hide(),o+=+a.reactions[n].total}d.text(y(o)),t?e.closest(".da-reactions-container").addClass("has_current"):e.closest(".da-reactions-container").removeClass("has_current")}}})}function t(e){e.stopPropagation();let t=a(this).data("id");a("#da-reactions-users-modal-background").toggleClass(`viewReaction${t}`)}function o(e){e.stopPropagation(),a(this).parent().toggleClass("open")}function n(e){e.stopPropagation(),u();let t=a(this).closest(".da-reactions-data, .da-reactions-container-async.gutenberg-block"),o=a(t).data("type"),n=a(t).data("id"),i=a(t).data("nonce")||DaReactions.nonce,l=a(this).data("reaction")||a(t).data("reaction")||0,d=a(this).data("pagenum")||0,p=c("clickedCount",o,n,l,d),h={action:"get_users_reactions",type:o,id:n,nonce:i,reaction:l,pagenum:d,limit:parseInt(DaReactions.modal_result_limit,10)};p&&"ok"===p.success?r(p,h):a.ajax({url:DaReactions.ajax_url,method:"post",cache:!1,data:h,success:function(a){s("clickedCount",o,n,l,a,d),a.success&&"ok"===a.success&&r(a,h)}})}function c(a,e,t,o,n){return DaReactions.cache=DaReactions.cache||{},DaReactions.cache.hasOwnProperty(a)&&(DaReactions.cache[a]=DaReactions.cache[a]||{},DaReactions.cache[a].hasOwnProperty(e)&&(DaReactions.cache[a][e]=DaReactions.cache[a][e]||{},DaReactions.cache[a][e].hasOwnProperty(t)&&(DaReactions.cache[a][e][t]=DaReactions.cache[a][e][t]||{},DaReactions.cache[a][e][t].hasOwnProperty(o)&&(DaReactions.cache[a][e][t][o]=DaReactions.cache[a][e][t][o]||{},DaReactions.cache[a][e][t][o].hasOwnProperty(n)&&(DaReactions.cache[a][e][t][o][n]=DaReactions.cache[a][e][t][o][n]||{},DaReactions.cache[a][e][t][o][n].hasOwnProperty("success")&&"ok"===DaReactions.cache[a][e][t][o][n].success)))))?DaReactions.cache[a][e][t][o][n]:{success:"no"}}function i(a,e,t,o){DaReactions.cache=DaReactions.cache||{},DaReactions.cache[a]=DaReactions.cache[a]||{},DaReactions.cache[a][e]=DaReactions.cache[a][e]||{},DaReactions.cache[a][e][t]=DaReactions.cache[a][e][t]||{},DaReactions.cache[a][e][t][o]={success:"no"}}function s(a,e,t,o,n,c){DaReactions.cache=DaReactions.cache||{},DaReactions.cache[a]=DaReactions.cache[a]||{},DaReactions.cache[a][e]=DaReactions.cache[a][e]||{},DaReactions.cache[a][e][t]=DaReactions.cache[a][e][t]||{},DaReactions.cache[a][e][t][o]=DaReactions.cache[a][e][t][o]||{},DaReactions.cache[a][e][t][o][c]=n}function r(e,t){if(l(),!e.reactions.length)return;let o=a('<div id="da-reactions-users-modal-background"></div>'),n=a('<div class="da-reactions-data">').data("type",t.type).data("id",t.id).data("limit",t.limit).data("nonce",t.nonce).data("reaction",t.reaction),c={};o.append(n);for(let t of e.reactions){c[t.emotion_id]={image:t.image,label:t.label};let e=a(`<a href="${t.user_link||"javascript:return false;"}" class="da-reactions-users-modal-row reaction${t.emotion_id}"></a>`);e.append(`<img src="${t.image}" alt="${t.label}">`),e.append(`<span>${t.display_name}</span>`),n.append(e)}if(Array.isArray(e.buttons)){let t=a('<div class="da-reactions-users-modal-row tools"></div>');t.append('<img src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIKCSB2aWV3Qm94PSIwIDAgMzQyLjk0NyAzNDIuOTQ3IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzNDIuOTQ3IDM0Mi45NDc7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KCTxwb2x5Z29uIHBvaW50cz0iMzQyLjk0NywyMS4yMTMgMzIxLjczNCwwIDE3MS40NzMsMTUwLjI2IDIxLjIxMywwIDAsMjEuMjEzIDE1MC4yNiwxNzEuNDczIDAsMzIxLjczNCAyMS4yMTMsMzQyLjk0NwoJCTE3MS40NzMsMTkyLjY4NiAzMjEuNzM0LDM0Mi45NDcgMzQyLjk0NywzMjEuNzM0IDE5Mi42ODYsMTcxLjQ3MyAiLz4KPC9zdmc+" alt="All" class="da-reactions-users-modal-toggle toggleReaction0" data-id="0">');for(let o of e.buttons)t.append(a(`<img src="${o.image}" alt="${o.label}" class="da-reactions-button da-reactions-users-modal-toggle da-reactions-toggle-reaction${o.ID} ${o.current?"current":""}" data-id="${o.ID}">`).data("reaction",o.ID));n.prepend(t)}let i=parseInt(e.pagination.index,10),s=parseInt(Math.ceil(e.pagination.total/e.pagination.size)),r=a('<div class="da-reactions-users-modal-paginator da-reactions-data"></div>').data("type",t.type).data("id",t.id).data("limit",t.limit).data("nonce",t.nonce).data("reaction",t.reaction);i>1&&r.append(a('<span class="da-reactions-users-modal-paginator-back">&larr;</span>').data("pagenum",i-1)),r.append('<span class="da-reactions-users-modal-paginator-text">'+i+" / "+s+"</span>"),i<s&&r.append(a('<span class="da-reactions-users-modal-paginator-next">&rarr;</span>').data("pagenum",i+1)),n.append(r),a("body").append(o)}function l(){a("#da-reactions-users-modal-background").remove()}function d(e,t){if(u(),!e.length)return;let o=a('<div id="da-reactions-users-tooltip"></div>').css({left:t.clientX,top:t.clientY-20}),n=a("<div>");o.append(n);for(let t of e){0;let e=a('<div class="da-reactions-users-tooltip-row"></div>');e.append(`<img src="${t.image}" alt="${t.label}">`),e.append(`<span>${t.display_name}</span>`),n.append(e)}a("body").append(o)}function u(){a("#da-reactions-users-tooltip").html("").remove()}function p(e){let t=a(this).closest(".da-reactions-data, .da-reactions-container-async.gutenberg-block"),o=a(t).data("type"),n=a(t).data("id"),i=a(t).data("nonce")||DaReactions.nonce,r=a(t).data("reaction")||"",l=c("mouseOverCount",o,n,r,1),u={action:"get_users_reactions",type:o,id:n,nonce:i,reaction:r,limit:parseInt(DaReactions.tooltip_result_limit,10)};l&&"ok"===l.success?"ok"===l.success&&d(l.reactions,e):a.ajax({url:DaReactions.ajax_url,method:"post",cache:!1,data:u,success:function(a){"ok"===a.success&&(s("mouseOverCount",o,n,r,a,1),d(a.reactions,e))}})}function h(e){var t;a(e.target).is(".count")?(t=e,a("#da-reactions-users-tooltip").css({left:t.clientX,top:t.clientY-20})):u()}function m(){u()}function D(){a(this).data("spotted")||a.ajax({context:this,cache:!1,data:{action:"load_buttons",type:a(this).data("type"),id:a(this).data("id"),nonce:a(this).data("nonce")||DaReactions.nonce},method:"post",success:function(e){a(this).html(e)},url:DaReactions.ajax_url})}function y(a){a=void 0!==a?a:0;let e,t=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"},{value:1e21,symbol:"Z"},{value:1e23,symbol:"Y"}];for(e=t.length-1;e>0&&!(a>=t[e].value);e--);return(a/t[e].value).toFixed(2).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1").replace(".00","")+t[e].symbol}a(document).ready(function(){let c=a(document);c.scrollSpot(D,".da-reactions-container-async"),c.on("click",".reaction img",e),DaReactions.display_detail_modal&&c.on("click",".da-reactions-outer .count",n),DaReactions.display_detail_modal&&c.on("click",".da-reactions-users-modal-paginator-next",n),DaReactions.display_detail_modal&&c.on("click",".da-reactions-users-modal-paginator-prev",n),DaReactions.display_detail_modal&&c.on("click",".da-reactions-outer .count",n),c.on("click",".reactions-toggle",o),c.on("click",".da-reactions-reveal img",function(){a(this).closest(".da-reactions-reveal").toggleClass("active")}),c.on("mouseup",function(e){let t=a(".da-reactions-reveal.active:eq(0)");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("active")}),DaReactions.display_detail_tooltip&&c.on("mouseover",".da-reactions-outer .count",p),DaReactions.display_detail_modal&&c.on("click","#da-reactions-users-modal-background",l),DaReactions.display_detail_modal_toolbar&&c.on("click",".da-reactions-users-modal-toggle",t),DaReactions.display_detail_tooltip&&c.on("mousemove",h),DaReactions.display_detail_tooltip&&c.on("mouseout",".da-reactions-outer .count",m)})}(jQuery)}});
//# sourceMappingURL=public.js.map